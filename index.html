<!DOCTYPE html>
<html>
<head>
    <title>Test Page for WebView</title>
    <script>
        // Send data to the React Native app
        function sendGetNotificationTokenAndAppRequestToApp() {
            if (window.JsInterface) {
                window.JsInterface.sendDataToApp("APP:");
            } else {
                console.log('ReactNativeApp interface is not available.');
            }
        }

        function sendDeviceInfoRequestToApp() {
            if (window.JsInterface) {
                window.JsInterface.sendDataToApp("GETDEVICEINFO:");
            } else {
                console.log('ReactNativeApp interface is not available.');
            }
        }

        function sendClearCacheRequestToApp() {
            if (window.JsInterface) {
                window.JsInterface.sendDataToApp("CLEARCACHEWEBVIEW:");
            } else {
                console.log('ReactNativeApp interface is not available.');
            }
        }

        function sendGetLocationRequestToApp() {
            if (window.JsInterface) {
                window.JsInterface.sendDataToApp("GETLOCATION:");
            } else {
                console.log('ReactNativeApp interface is not available.');
            }
        }

        function sendSetClipboardRequestToApp() {
            // Temporarily deactive due to conflict problems
            if (window.JsInterface) {
                window.JsInterface.sendDataToApp("COPYTOCLIPBOARD:text_to_be_copied");
            } else {
                console.log('ReactNativeApp interface is not available.');
            }
        }

        function sendGetAppVersionRequestToApp() {
            if (window.JsInterface) {
                window.JsInterface.sendDataToApp("GETAPPVERSION:");
            } else {
                console.log('ReactNativeApp interface is not available.');
            }
        }


        // Handle messages from the React Native app
        function handleMessageFromAppDocument(message) {
            console.log("Received from app:", message);
            if (message.slice(0, 16) === "ANDROIDFCMTOKEN/") {
                alert("Doc"+message)
            } else if (message.slice(0, 12) === "IOSFCMTOKEN/") {
                aalert("Doc"+message)
            } else if (message.slice(0, 14) === "GETDEVICEINFO/") {
                alert("Doc"+message)
            } else if (message.slice(0, 14) === "GETAPPVERSION/") {
                alert("Doc"+message)
            } else if (message.slice(0, 12) === "GETLOCATION/") {
                alert("Doc"+message)
            } else if (message.slice(0, 13) === "CACHECLEARED/") {
                alert("Doc"+message)
            } else {
                alert("Doc"+message)
            }
        }

        // Handle messages from the React Native app
        function handleMessageFromAppWindow(message) {
            console.log("Received from app:", message);
            if (message.slice(0, 16) === "ANDROIDFCMTOKEN/") {
                alert("Win"+message)
            } else if (message.slice(0, 12) === "IOSFCMTOKEN/") {
                alert("Win"+message)
            } else if (message.slice(0, 14) === "GETDEVICEINFO/") {
                alert("Win"+message)
            } else if (message.slice(0, 14) === "GETAPPVERSION/") {
                alert("Win"+message)
            } else if (message.slice(0, 12) === "GETLOCATION/") {
                alert("Win"+message)
            } else if (message.slice(0, 13) === "CACHECLEARED/") {
                alert("Win"+message)
            } else {
                alert("Win"+message)
            }
        }

        document.addEventListener('message', function (e) {
            handleMessageFromAppDocument(e.data);
        });
        window.addEventListener('message', function (e) {
            handleMessageFromAppWindow(e.data);
        });
    </script>
</head>
<body>
<h1>WebView Test Page</h1>
<h2>1</h2>
<button onclick="sendGetNotificationTokenAndAppRequestToApp()">Send GetNotificationTokenRequest to App</button>
<button onclick="sendDeviceInfoRequestToApp()">Send GetDeviceInfoRequest to App</button>
<button onclick="sendClearCacheRequestToApp()">Send ClearCacheRequest to App</button>
<button onclick="sendGetLocationRequestToApp()">Send GetLocationRequest to App</button>
<button onclick="sendSetClipboardRequestToApp()">Send SetClipboardRequest to App</button>
<button onclick="sendGetAppVersionRequestToApp()">Send GetAppVersionRequest to App</button>
<br/>
<a href="mofidioswrapper://checkout_test_parameters_will_be_concatanated_to_the_mainsite_url_and_rerender">Open iOS App</a>
<br/>
<a href="mofidandroidwrapper://checkout_test_parameters_will_be_concatanated_to_the_mainsite_url_and_rerender">Open Android App</a>
</body>
</html>
